(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{eKXD:function(t,e,n){"use strict";n.r(e),n.d(e,"StrategyModule",(function(){return gt}));var o=n("tyNb"),i=n("XNiG"),b=n("fXoL"),c=n("z6cu"),r=n("JIr8"),a=n("tk/3");let l=(()=>{class t{constructor(t){this.http=t}getBacktestData(t){return this.http.get("assets/backtest.json").pipe(Object(r.a)(t=>Object(c.a)(t)))}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(a.b))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=n("vkgz"),d=n("AytR");const u={headers:new a.d({"Content-Type":"application/json"})};let g=(()=>{class t{constructor(t){this.http=t,this.strategyUrl=d.a.pvtApiUrl+"/strategy",this.backtestUrl=d.a.coreApiUrl+"/backtest"}createStrategy(t){return this.http.post(this.strategyUrl+"/create",t,u).pipe(Object(s.a)(()=>console.log("strategy created successfully"),Object(r.a)(t=>Object(c.a)(t))))}updateStrategy(t){return this.http.post(this.strategyUrl+"/update",t,u).pipe(Object(s.a)(()=>console.log("strategy updated successfully"),Object(r.a)(t=>Object(c.a)(t))))}getStrategy(t){return this.http.get(`${this.strategyUrl}/get/${t}`).pipe(Object(s.a)(t=>console.log(t)),Object(r.a)(t=>Object(c.a)(t)))}getAllStrategies(){return this.http.get(this.strategyUrl+"/all").pipe(Object(s.a)(t=>console.log(t)),Object(r.a)(t=>Object(c.a)(t)))}removeStrategy(t){return this.http.post(this.strategyUrl+"/remove",{id:t},u).pipe(Object(s.a)(()=>console.log("strategy deleted successfully"),Object(r.a)(t=>Object(c.a)(t))))}runStrategy(t){return this.http.post(this.backtestUrl+"/run",t,u).pipe(Object(s.a)(t=>this.backtestdata=t),Object(r.a)(t=>Object(c.a)(t)))}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(a.b))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=n("Jqv5"),f=n("njyG"),p=n("ofXK");function h(t,e){if(1&t){const t=b.Lb();b.Kb(0,"tr",4),b.Kb(1,"td",24),b.Rb("click",(function(){b.gc(t);const n=e.$implicit;return b.Tb().setCurrentBacktestData(n)})),b.Ib(2,"ion-icon",25),b.Jb(),b.Kb(3,"td"),b.kc(4),b.Jb(),b.Kb(5,"td",26),b.kc(6),b.Ub(7,"currency"),b.Ub(8,"number"),b.Jb(),b.Kb(9,"td"),b.kc(10),b.Jb(),b.Kb(11,"td"),b.kc(12),b.Jb(),b.Kb(13,"td"),b.kc(14),b.Jb(),b.Kb(15,"td"),b.kc(16),b.Ub(17,"number"),b.Jb(),b.Kb(18,"td"),b.kc(19),b.Ub(20,"number"),b.Jb(),b.Jb()}if(2&t){const t=e.$implicit;b.xb(4),b.lc(t.symbol),b.xb(1),b.Xb("ngClass",t.percentage_profit>=0?"profit":"loss"),b.xb(1),b.nc("",b.Wb(7,9,t.total_profit,"INR")," (",b.Wb(8,12,t.percentage_profit,"1.2-2")," %)"),b.xb(4),b.lc(t.total_no_trade),b.xb(2),b.lc(t.number_win),b.xb(2),b.lc(t.number_loss),b.xb(2),b.lc(b.Wb(17,15,t.sharpe_ratio,"1.2-4")),b.xb(3),b.lc(b.Wb(20,18,t.maximum_drawdown,"1.2-2"))}}function y(t,e){if(1&t&&(b.Kb(0,"th"),b.kc(1),b.Jb()),2&t){const t=e.$implicit;b.xb(1),b.mc(" ",t.name," ")}}function k(t,e){if(1&t&&(b.Kb(0,"td"),b.kc(1),b.Ub(2,"number"),b.Jb()),2&t){const t=e.$implicit;b.xb(1),b.mc(" ",b.Wb(2,1,t.value,"1.2-2")," ")}}function J(t,e){if(1&t&&(b.Kb(0,"tr",4),b.Kb(1,"td"),b.kc(2),b.Ub(3,"date"),b.Jb(),b.Kb(4,"td"),b.kc(5),b.Jb(),b.Kb(6,"td"),b.kc(7),b.Jb(),b.Kb(8,"td"),b.kc(9),b.Jb(),b.Kb(10,"td",29),b.kc(11),b.Ub(12,"number"),b.Jb(),b.Kb(13,"td",29),b.kc(14),b.Jb(),b.Kb(15,"td"),b.kc(16),b.Jb(),b.Kb(17,"td"),b.kc(18),b.Jb(),b.Kb(19,"td"),b.kc(20),b.Jb(),b.jc(21,k,3,4,"td",28),b.Jb()),2&t){const t=e.$implicit;b.xb(2),b.lc(b.Wb(3,12,1e3*t.date_time,"mediumDate")),b.xb(3),b.lc(t.action),b.xb(2),b.lc(t.quantity),b.xb(2),b.lc(t.price),b.xb(1),b.Xb("ngClass",t.pnl>=0?"profit":"loss"),b.xb(1),b.lc(b.Wb(12,15,t.pnl,"1.2-2")),b.xb(2),b.Xb("ngClass",t.cumulative_pnl>=0?"profit":"loss"),b.xb(1),b.lc(t.cumulative_pnl),b.xb(2),b.lc(t.portfolio_value),b.xb(2),b.lc(t.volume),b.xb(2),b.lc(t.trigger_code),b.xb(1),b.Xb("ngForOf",t.technical_indicators)}}function K(t,e){if(1&t&&(b.Kb(0,"div"),b.Kb(1,"table",27),b.Kb(2,"thead"),b.Kb(3,"tr"),b.Kb(4,"th"),b.kc(5,"Date"),b.Jb(),b.Kb(6,"th"),b.kc(7,"Action"),b.Jb(),b.Kb(8,"th"),b.kc(9,"Quantity"),b.Jb(),b.Kb(10,"th"),b.kc(11,"Price"),b.Jb(),b.Kb(12,"th"),b.kc(13,"P&L"),b.Jb(),b.Kb(14,"th"),b.kc(15,"cumulative P&L"),b.Jb(),b.Kb(16,"th"),b.kc(17,"Portfolio Value"),b.Jb(),b.Kb(18,"th"),b.kc(19,"Volume"),b.Jb(),b.Kb(20,"th"),b.kc(21,"Trigger Code"),b.Jb(),b.jc(22,y,2,1,"th",28),b.Jb(),b.Jb(),b.Kb(23,"tbody"),b.jc(24,J,22,18,"tr",6),b.Jb(),b.Jb(),b.Jb()),2&t){const t=b.Tb();b.xb(22),b.Xb("ngForOf",t.currentBackDestData.trade_log[0].technical_indicators),b.xb(2),b.Xb("ngForOf",t.currentBackDestData.trade_log)}}let v=(()=>{class t{constructor(t,e){this.backtestService=t,this.strategyService=e,this.dtOptions={},this.dtTrigger=new i.a}ngOnInit(){this.dtOptions={pagingType:"full_numbers",searching:!1,order:[[1,"desc"]],columnDefs:[{orderable:!1,targets:0}]},this.getBacktestData()}ngOnDestroy(){this.dtTrigger.unsubscribe()}getBacktestData(){this.strategyService.backtestdata?(this.backtestDatas=this.strategyService.backtestdata,this.dtTrigger.next()):this.backtestService.getBacktestData(null).subscribe(t=>{this.backtestDatas=t,this.dtTrigger.next()})}setCurrentBacktestData(t){this.currentBackDestData=t}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(l),b.Hb(g))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-backtest"]],decls:121,vars:68,consts:[[1,"container"],[1,"my-4"],[1,"mb-4"],["datatable","",1,"table","table-bordered","table-striped","table-hover",3,"dtOptions","dtTrigger"],[1,"text-center"],[1,"details-control","sorting_disabled"],["class","text-center",4,"ngFor","ngForOf"],["id","backtestDetail","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"table","table-striped","table-bordered"],[1,"border-bottom-3"],[1,"fw-bold"],[1,"profit"],[1,"loss"],["data-bs-toggle","collapse","href","#tradeLogTable","aria-expanded","false","aria-controls","tradeLogTable",2,"text-decoration","none"],["name","caret-forward-outline"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["data-bs-toggle","modal","data-bs-target","#backtestDetail",3,"click"],["name","add-circle-outline"],[1,"fw-bold",3,"ngClass"],["id","tradeLogTable",1,"table","table-striped","table-bordered","table-sm","collapse"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,e){1&t&&(b.Kb(0,"div",0),b.Ib(1,"app-navbar"),b.Kb(2,"div",1),b.Kb(3,"h2",2),b.kc(4,"Backtest Result"),b.Jb(),b.Kb(5,"table",3),b.Kb(6,"thead"),b.Kb(7,"tr",4),b.Ib(8,"th",5),b.Kb(9,"th"),b.kc(10,"Instrument"),b.Jb(),b.Kb(11,"th"),b.kc(12,"P&L"),b.Jb(),b.Kb(13,"th"),b.kc(14,"Trade Count"),b.Jb(),b.Kb(15,"th"),b.kc(16,"Wining Trades"),b.Jb(),b.Kb(17,"th"),b.kc(18,"Losing Trades"),b.Jb(),b.Kb(19,"th"),b.kc(20,"Sharpe Ratio"),b.Jb(),b.Kb(21,"th"),b.kc(22,"Max Drawdown"),b.Jb(),b.Jb(),b.Jb(),b.Kb(23,"tbody"),b.jc(24,h,21,21,"tr",6),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(25,"div",7),b.Kb(26,"div",8),b.Kb(27,"div",9),b.Kb(28,"div",10),b.Kb(29,"h2",11),b.kc(30),b.Jb(),b.Ib(31,"button",12),b.Jb(),b.Kb(32,"div",13),b.Kb(33,"h5"),b.kc(34,"Trade Summary"),b.Jb(),b.Kb(35,"table",14),b.Kb(36,"thead"),b.Kb(37,"tr"),b.Ib(38,"th"),b.Kb(39,"th"),b.kc(40,"Total P&L"),b.Jb(),b.Kb(41,"th"),b.kc(42,"avg. P&L"),b.Jb(),b.Kb(43,"th"),b.kc(44,"Max. P&L"),b.Jb(),b.Kb(45,"th"),b.kc(46,"Min. P&L"),b.Jb(),b.Kb(47,"th"),b.kc(48,"Quantity"),b.Jb(),b.Kb(49,"th"),b.kc(50,"Profit std. Deviation"),b.Jb(),b.Jb(),b.Jb(),b.Kb(51,"tbody"),b.Kb(52,"tr",15),b.Kb(53,"td",16),b.kc(54,"Total Trades"),b.Jb(),b.Kb(55,"td"),b.kc(56),b.Ub(57,"number"),b.Jb(),b.Kb(58,"td"),b.kc(59),b.Ub(60,"number"),b.Jb(),b.Kb(61,"td"),b.kc(62),b.Ub(63,"number"),b.Jb(),b.Kb(64,"td"),b.kc(65),b.Ub(66,"number"),b.Jb(),b.Kb(67,"td"),b.kc(68),b.Jb(),b.Kb(69,"td"),b.kc(70),b.Ub(71,"number"),b.Jb(),b.Jb(),b.Kb(72,"tr",17),b.Kb(73,"td",16),b.kc(74,"Profitable Trades"),b.Jb(),b.Kb(75,"td"),b.kc(76),b.Ub(77,"number"),b.Jb(),b.Kb(78,"td"),b.kc(79),b.Ub(80,"number"),b.Jb(),b.Kb(81,"td"),b.kc(82),b.Ub(83,"number"),b.Jb(),b.Kb(84,"td"),b.kc(85),b.Ub(86,"number"),b.Jb(),b.Kb(87,"td"),b.kc(88),b.Jb(),b.Kb(89,"td"),b.kc(90),b.Ub(91,"number"),b.Jb(),b.Jb(),b.Kb(92,"tr",18),b.Kb(93,"td",16),b.kc(94,"Loss Trades"),b.Jb(),b.Kb(95,"td"),b.kc(96),b.Ub(97,"number"),b.Jb(),b.Kb(98,"td"),b.kc(99),b.Ub(100,"number"),b.Jb(),b.Kb(101,"td"),b.kc(102),b.Ub(103,"number"),b.Jb(),b.Kb(104,"td"),b.kc(105),b.Ub(106,"number"),b.Jb(),b.Kb(107,"td"),b.kc(108),b.Jb(),b.Kb(109,"td"),b.kc(110),b.Ub(111,"number"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Ib(112,"br"),b.Kb(113,"h5"),b.Kb(114,"a",19),b.Ib(115,"ion-icon",20),b.kc(116," Trade Log "),b.Jb(),b.Jb(),b.jc(117,K,25,2,"div",21),b.Jb(),b.Kb(118,"div",22),b.Kb(119,"button",23),b.kc(120,"Close"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&t&&(b.xb(5),b.Xb("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),b.xb(19),b.Xb("ngForOf",e.backtestDatas),b.xb(6),b.mc("Backtest Detail for ",null==e.currentBackDestData?null:e.currentBackDestData.symbol,""),b.xb(26),b.lc(b.Wb(57,23,null==e.currentBackDestData?null:e.currentBackDestData.total_trades.total_pnl,"1.2-2")),b.xb(3),b.lc(b.Wb(60,26,null==e.currentBackDestData?null:e.currentBackDestData.total_trades.avg_profit,"1.2-2")),b.xb(3),b.lc(b.Wb(63,29,null==e.currentBackDestData?null:e.currentBackDestData.total_trades.max_profit,"1.2-2")),b.xb(3),b.lc(b.Wb(66,32,null==e.currentBackDestData?null:e.currentBackDestData.total_trades.min_profit,"1.2-2")),b.xb(3),b.lc(null==e.currentBackDestData?null:e.currentBackDestData.total_trades.quantity),b.xb(2),b.lc(b.Wb(71,35,null==e.currentBackDestData?null:e.currentBackDestData.total_trades.profit_std_dev,"1.2-2")),b.xb(6),b.lc(b.Wb(77,38,null==e.currentBackDestData?null:e.currentBackDestData.profitable_trades.total_pnl,"1.2-2")),b.xb(3),b.lc(b.Wb(80,41,null==e.currentBackDestData?null:e.currentBackDestData.profitable_trades.avg_profit,"1.2-2")),b.xb(3),b.lc(b.Wb(83,44,null==e.currentBackDestData?null:e.currentBackDestData.profitable_trades.max_profit,"1.2-2")),b.xb(3),b.lc(b.Wb(86,47,null==e.currentBackDestData?null:e.currentBackDestData.profitable_trades.min_profit,"1.2-2")),b.xb(3),b.lc(null==e.currentBackDestData?null:e.currentBackDestData.profitable_trades.quantity),b.xb(2),b.lc(b.Wb(91,50,null==e.currentBackDestData?null:e.currentBackDestData.profitable_trades.profit_std_dev,"1.2-2")),b.xb(6),b.lc(b.Wb(97,53,null==e.currentBackDestData?null:e.currentBackDestData.loss_trades.total_pnl,"1.2-2")),b.xb(3),b.lc(b.Wb(100,56,null==e.currentBackDestData?null:e.currentBackDestData.loss_trades.avg_loss,"1.2-2")),b.xb(3),b.lc(b.Wb(103,59,null==e.currentBackDestData?null:e.currentBackDestData.loss_trades.max_loss,"1.2-2")),b.xb(3),b.lc(b.Wb(106,62,null==e.currentBackDestData?null:e.currentBackDestData.loss_trades.min_loss,"1.2-2")),b.xb(3),b.lc(null==e.currentBackDestData?null:e.currentBackDestData.loss_trades.quantity),b.xb(2),b.lc(b.Wb(111,65,null==e.currentBackDestData?null:e.currentBackDestData.loss_trades.profit_std_dev,"1.2-2")),b.xb(7),b.Xb("ngIf",e.currentBackDestData))},directives:[m.a,f.a,p.m,p.n,p.l],pipes:[p.f,p.c,p.e],styles:["ion-icon[_ngcontent-%COMP%]{zoom:1.5}.profit[_ngcontent-%COMP%]{color:#0c0!important}.loss[_ngcontent-%COMP%]{color:red!important}"]}),t})();var x=n("LvDl"),C=n("8hSh"),M=n("7ch9"),O=n("3Pt+"),T=n("C+F7");const _=["stockAutoComplete"];function w(t,e){1&t&&(b.Kb(0,"h2",52),b.kc(1,"Create New Strategy"),b.Jb())}function D(t,e){if(1&t){const t=b.Lb();b.Kb(0,"button",53),b.kc(1),b.Kb(2,"ion-icon",54),b.Rb("click",(function(){b.gc(t);const n=e.index;return b.Tb().removeSelectedSymbol(n)})),b.Jb(),b.Jb()}if(2&t){const t=e.$implicit;b.xb(1),b.mc(" ",t," ")}}function I(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",78),b.Rb("ngModelChange",(function(e){b.gc(t);const n=b.Tb().index;return b.Tb().entryConnectors[n-1].conditional_operator=e})),b.Kb(1,"option",79),b.kc(2,"And"),b.Jb(),b.Kb(3,"option",80),b.kc(4,"Or"),b.Jb(),b.Jb()}if(2&t){const t=b.Tb().index,e=b.Tb();b.Zb("id","condn-operator-",t,""),b.Zb("name","condn-operator-",t,""),b.Xb("ngModel",e.entryConnectors[t-1].conditional_operator)}}function P(t,e){if(1&t&&(b.Kb(0,"option",83),b.kc(1),b.Jb()),2&t){const t=e.$implicit,n=b.Tb(3);b.Yb("value",t.name),b.xb(1),b.nc(" ",t.name,"(",n.techIndicatorsByName[t.name][0].name,")")}}function j(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",81),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.left[0].name=e}))("change",(function(){b.gc(t);const e=b.Tb().$implicit;return b.Tb().setAttributes(e.left[0])})),b.jc(1,P,2,3,"option",82),b.Jb()}if(2&t){const t=b.Tb(),e=t.index,n=t.$implicit,o=b.Tb();b.Zb("name","condn-left-TI-",e,""),b.Xb("ngModel",n.left[0].name),b.xb(1),b.Xb("ngForOf",o.techIndicators)}}function S(t,e){if(1&t){const t=b.Lb();b.Kb(0,"input",84),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.left[0].value=e})),b.Jb()}if(2&t){const t=b.Tb(),e=t.$implicit;b.Zb("name","condn-left-number-",t.index,""),b.Xb("ngModel",e.left[0].value)}}function R(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",85),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.left[0].name=e})),b.Kb(1,"option",86),b.kc(2,"Open"),b.Jb(),b.Kb(3,"option",87),b.kc(4,"High"),b.Jb(),b.Kb(5,"option",88),b.kc(6,"Low"),b.Jb(),b.Kb(7,"option",89),b.kc(8,"Close"),b.Jb(),b.Kb(9,"option",90),b.kc(10,"Volume"),b.Jb(),b.Jb()}if(2&t){const t=b.Tb(),e=t.$implicit;b.Zb("name","condn-left-candle-",t.index,""),b.Xb("ngModel",e.left[0].name)}}function X(t,e){if(1&t){const t=b.Lb();b.Kb(0,"a",91),b.Rb("click",(function(){b.gc(t);const e=b.Tb().$implicit;return b.Tb().markCurrentEditTiObj(e.left[0])})),b.Ib(1,"ion-icon",92),b.Jb()}}function B(t,e){if(1&t&&(b.Kb(0,"option",83),b.kc(1),b.Jb()),2&t){const t=e.$implicit,n=b.Tb(3);b.Yb("value",t.name),b.xb(1),b.nc(" ",t.name,"(",n.techIndicatorsByName[t.name][0].name,")")}}function L(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",81),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.right[0].name=e}))("change",(function(){b.gc(t);const e=b.Tb().$implicit;return b.Tb().setAttributes(e.right[0])})),b.jc(1,B,2,3,"option",82),b.Jb()}if(2&t){const t=b.Tb(),e=t.index,n=t.$implicit,o=b.Tb();b.Zb("name","condn-left-TI-",e,""),b.Xb("ngModel",n.right[0].name),b.xb(1),b.Xb("ngForOf",o.techIndicators)}}function $(t,e){if(1&t){const t=b.Lb();b.Kb(0,"input",84),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.right[0].value=e})),b.Jb()}if(2&t){const t=b.Tb(),e=t.$implicit;b.Zb("name","condn-right-number-",t.index,""),b.Xb("ngModel",e.right[0].value)}}function E(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",85),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.right[0].name=e})),b.Kb(1,"option",86),b.kc(2,"Open"),b.Jb(),b.Kb(3,"option",87),b.kc(4,"High"),b.Jb(),b.Kb(5,"option",88),b.kc(6,"Low"),b.Jb(),b.Kb(7,"option",89),b.kc(8,"Close"),b.Jb(),b.Kb(9,"option",90),b.kc(10,"Volume"),b.Jb(),b.Jb()}if(2&t){const t=b.Tb(),e=t.$implicit;b.Zb("name","condn-right-candle-",t.index,""),b.Xb("ngModel",e.right[0].name)}}function A(t,e){if(1&t){const t=b.Lb();b.Kb(0,"a",91),b.Rb("click",(function(){b.gc(t);const e=b.Tb().$implicit;return b.Tb().markCurrentEditTiObj(e.right[0])})),b.Ib(1,"ion-icon",92),b.Jb()}}function q(t,e){if(1&t){const t=b.Lb();b.Kb(0,"div",55),b.Kb(1,"div",56),b.Kb(2,"div",57),b.jc(3,I,5,3,"select",58),b.Kb(4,"select",59),b.Rb("ngModelChange",(function(n){return b.gc(t),e.$implicit.left[0].type=n}))("change",(function(){b.gc(t);const n=e.$implicit;return b.Tb().alterEntryObj(n,0,"left")})),b.Kb(5,"option",60),b.kc(6,"Technical Indicator"),b.Jb(),b.Kb(7,"option",61),b.kc(8,"Candle Prop"),b.Jb(),b.Kb(9,"option",62),b.kc(10,"Number"),b.Jb(),b.Jb(),b.jc(11,j,2,3,"select",63),b.jc(12,S,1,2,"input",64),b.jc(13,R,11,2,"select",65),b.jc(14,X,2,0,"a",66),b.Jb(),b.Jb(),b.Kb(15,"div",67),b.Kb(16,"select",68),b.Rb("ngModelChange",(function(n){return b.gc(t),e.$implicit.compare=n})),b.Kb(17,"option",69),b.kc(18,"crosses over"),b.Jb(),b.Kb(19,"option",70),b.kc(20,"crosses below"),b.Jb(),b.Kb(21,"option",71),b.kc(22,"greater than"),b.Jb(),b.Kb(23,"option",72),b.kc(24,"greater than equals to"),b.Jb(),b.Kb(25,"option",73),b.kc(26,"equals to"),b.Jb(),b.Kb(27,"option",74),b.kc(28,"less than"),b.Jb(),b.Kb(29,"option",75),b.kc(30,"less than equals to"),b.Jb(),b.Jb(),b.Jb(),b.Kb(31,"div",56),b.Kb(32,"div",57),b.Kb(33,"select",59),b.Rb("ngModelChange",(function(n){return b.gc(t),e.$implicit.right[0].type=n}))("change",(function(){b.gc(t);const n=e.$implicit;return b.Tb().alterEntryObj(n,0,"right")})),b.Kb(34,"option",60),b.kc(35,"Technical Indicator"),b.Jb(),b.Kb(36,"option",61),b.kc(37,"Candle Prop"),b.Jb(),b.Kb(38,"option",62),b.kc(39,"Number"),b.Jb(),b.Jb(),b.jc(40,L,2,3,"select",63),b.jc(41,$,1,2,"input",64),b.jc(42,E,11,2,"select",65),b.jc(43,A,2,0,"a",66),b.Kb(44,"span",76),b.Kb(45,"button",77),b.Rb("click",(function(){b.gc(t);const n=e.index;return b.Tb().removeEntryCondn(n)})),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&t){const t=e.$implicit,n=e.index,o=b.Tb();b.xb(3),b.Xb("ngIf",(null==o.entryRows?null:o.entryRows.length)>1&&0!==n),b.xb(1),b.Zb("name","entry-type-left-",n,""),b.Xb("ngModel",t.left[0].type),b.xb(7),b.Xb("ngIf","TI"==t.left[0].type),b.xb(1),b.Xb("ngIf","number"==t.left[0].type),b.xb(1),b.Xb("ngIf","field"==t.left[0].type),b.xb(1),b.Xb("ngIf","TI"==t.left[0].type&&t.left[0].name),b.xb(2),b.Zb("name","entry-compare-",n,""),b.Xb("ngModel",t.compare),b.xb(17),b.Zb("name","entry-type-right-",n,""),b.Xb("ngModel",t.right[0].type),b.xb(7),b.Xb("ngIf","TI"==t.right[0].type),b.xb(1),b.Xb("ngIf","number"==t.right[0].type),b.xb(1),b.Xb("ngIf","field"==t.right[0].type),b.xb(1),b.Xb("ngIf","TI"==t.right[0].type&&t.right[0].name)}}function F(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",78),b.Rb("ngModelChange",(function(e){b.gc(t);const n=b.Tb().index;return b.Tb().exitConnectors[n-1].conditional_operator=e})),b.Kb(1,"option",79),b.kc(2,"And"),b.Jb(),b.Kb(3,"option",80),b.kc(4,"Or"),b.Jb(),b.Jb()}if(2&t){const t=b.Tb().index,e=b.Tb();b.Zb("id","exit-condn-operator-",t,""),b.Zb("name","exit-condn-operator-",t,""),b.Xb("ngModel",e.exitConnectors[t-1].conditional_operator)}}function U(t,e){if(1&t&&(b.Kb(0,"option",83),b.kc(1),b.Jb()),2&t){const t=e.$implicit,n=b.Tb(3);b.Yb("value",t.name),b.xb(1),b.nc(" ",t.name,"(",n.techIndicatorsByName[t.name][0].name,")")}}function W(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",81),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.left[0].name=e}))("change",(function(){b.gc(t);const e=b.Tb().$implicit;return b.Tb().setAttributes(e.left[0])})),b.jc(1,U,2,3,"option",82),b.Jb()}if(2&t){const t=b.Tb(),e=t.index,n=t.$implicit,o=b.Tb();b.Zb("name","exit-condn-left-TI-",e,""),b.Xb("ngModel",n.left[0].name),b.xb(1),b.Xb("ngForOf",o.techIndicators)}}function N(t,e){if(1&t){const t=b.Lb();b.Kb(0,"input",84),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.left[0].value=e})),b.Jb()}if(2&t){const t=b.Tb(),e=t.$implicit;b.Zb("name","exit-condn-left-number-",t.index,""),b.Xb("ngModel",e.left[0].value)}}function Z(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",85),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.left[0].name=e})),b.Kb(1,"option",86),b.kc(2,"Open"),b.Jb(),b.Kb(3,"option",87),b.kc(4,"High"),b.Jb(),b.Kb(5,"option",88),b.kc(6,"Low"),b.Jb(),b.Kb(7,"option",89),b.kc(8,"Close"),b.Jb(),b.Kb(9,"option",90),b.kc(10,"Volume"),b.Jb(),b.Jb()}if(2&t){const t=b.Tb(),e=t.$implicit;b.Zb("name","exit-condn-left-candle-",t.index,""),b.Xb("ngModel",e.left[0].name)}}function z(t,e){if(1&t){const t=b.Lb();b.Kb(0,"a",91),b.Rb("click",(function(){b.gc(t);const e=b.Tb().$implicit;return b.Tb().markCurrentEditTiObj(e.left[0])})),b.Ib(1,"ion-icon",92),b.Jb()}}function Y(t,e){if(1&t&&(b.Kb(0,"option",83),b.kc(1),b.Jb()),2&t){const t=e.$implicit,n=b.Tb(3);b.Yb("value",t.name),b.xb(1),b.nc(" ",t.name,"(",n.techIndicatorsByName[t.name][0].name,")")}}function H(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",81),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.right[0].name=e}))("change",(function(){b.gc(t);const e=b.Tb().$implicit;return b.Tb().setAttributes(e.right[0])})),b.jc(1,Y,2,3,"option",82),b.Jb()}if(2&t){const t=b.Tb(),e=t.index,n=t.$implicit,o=b.Tb();b.Zb("name","exit-condn-right-TI-",e,""),b.Xb("ngModel",n.right[0].name),b.xb(1),b.Xb("ngForOf",o.techIndicators)}}function V(t,e){if(1&t){const t=b.Lb();b.Kb(0,"input",84),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.right[0].value=e})),b.Jb()}if(2&t){const t=b.Tb(),e=t.$implicit;b.Zb("name","exit-condn-right-number-",t.index,""),b.Xb("ngModel",e.right[0].value)}}function Q(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",85),b.Rb("ngModelChange",(function(e){return b.gc(t),b.Tb().$implicit.right[0].name=e})),b.Kb(1,"option",86),b.kc(2,"Open"),b.Jb(),b.Kb(3,"option",87),b.kc(4,"High"),b.Jb(),b.Kb(5,"option",88),b.kc(6,"Low"),b.Jb(),b.Kb(7,"option",89),b.kc(8,"Close"),b.Jb(),b.Kb(9,"option",90),b.kc(10,"Volume"),b.Jb(),b.Jb()}if(2&t){const t=b.Tb(),e=t.$implicit;b.Zb("name","exit-condn-right-candle-",t.index,""),b.Xb("ngModel",e.right[0].name)}}function G(t,e){if(1&t){const t=b.Lb();b.Kb(0,"a",91),b.Rb("click",(function(){b.gc(t);const e=b.Tb().$implicit;return b.Tb().markCurrentEditTiObj(e.right[0])})),b.Ib(1,"ion-icon",92),b.Jb()}}function tt(t,e){if(1&t){const t=b.Lb();b.Kb(0,"div",55),b.Kb(1,"div",56),b.Kb(2,"div",57),b.jc(3,F,5,3,"select",58),b.Kb(4,"select",59),b.Rb("ngModelChange",(function(n){return b.gc(t),e.$implicit.left[0].type=n}))("change",(function(){b.gc(t);const n=e.$implicit;return b.Tb().alterExitObj(n,0,"left")})),b.Kb(5,"option",60),b.kc(6,"Technical Indicator"),b.Jb(),b.Kb(7,"option",61),b.kc(8,"Candle Prop"),b.Jb(),b.Kb(9,"option",62),b.kc(10,"Number"),b.Jb(),b.Jb(),b.jc(11,W,2,3,"select",63),b.jc(12,N,1,2,"input",64),b.jc(13,Z,11,2,"select",65),b.jc(14,z,2,0,"a",66),b.Jb(),b.Jb(),b.Kb(15,"div",67),b.Kb(16,"select",68),b.Rb("ngModelChange",(function(n){return b.gc(t),e.$implicit.compare=n})),b.Kb(17,"option",69),b.kc(18,"crosses over"),b.Jb(),b.Kb(19,"option",70),b.kc(20,"crosses below"),b.Jb(),b.Kb(21,"option",71),b.kc(22,"greater than"),b.Jb(),b.Kb(23,"option",72),b.kc(24,"greater than equals to"),b.Jb(),b.Kb(25,"option",73),b.kc(26,"equals to"),b.Jb(),b.Kb(27,"option",74),b.kc(28,"less than"),b.Jb(),b.Kb(29,"option",75),b.kc(30,"less than equals to"),b.Jb(),b.Jb(),b.Jb(),b.Kb(31,"div",56),b.Kb(32,"div",57),b.Kb(33,"select",59),b.Rb("ngModelChange",(function(n){return b.gc(t),e.$implicit.right[0].type=n}))("change",(function(){b.gc(t);const n=e.$implicit;return b.Tb().alterExitObj(n,0,"right")})),b.Kb(34,"option",60),b.kc(35,"Technical Indicator"),b.Jb(),b.Kb(36,"option",61),b.kc(37,"Candle Prop"),b.Jb(),b.Kb(38,"option",62),b.kc(39,"Number"),b.Jb(),b.Jb(),b.jc(40,H,2,3,"select",63),b.jc(41,V,1,2,"input",64),b.jc(42,Q,11,2,"select",65),b.jc(43,G,2,0,"a",66),b.Kb(44,"span",76),b.Kb(45,"button",77),b.Rb("click",(function(){b.gc(t);const n=e.index;return b.Tb().removeExitCondn(n)})),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&t){const t=e.$implicit,n=e.index,o=b.Tb();b.xb(3),b.Xb("ngIf",(null==o.exitRows?null:o.exitRows.length)>1&&0!==n),b.xb(1),b.Zb("name","entry-type-left-",n,""),b.Xb("ngModel",t.left[0].type),b.xb(7),b.Xb("ngIf","TI"==t.left[0].type),b.xb(1),b.Xb("ngIf","number"==t.left[0].type),b.xb(1),b.Xb("ngIf","field"==t.left[0].type),b.xb(1),b.Xb("ngIf","TI"==t.left[0].type&&t.left[0].name),b.xb(2),b.Zb("name","exit-compare-",n,""),b.Xb("ngModel",t.compare),b.xb(17),b.Zb("name","exit-type-right-",n,""),b.Xb("ngModel",t.right[0].type),b.xb(7),b.Xb("ngIf","TI"==t.right[0].type),b.xb(1),b.Xb("ngIf","number"==t.right[0].type),b.xb(1),b.Xb("ngIf","field"==t.right[0].type),b.xb(1),b.Xb("ngIf","TI"==t.right[0].type&&t.right[0].name)}}function et(t,e){if(1&t){const t=b.Lb();b.Kb(0,"input",97),b.Rb("ngModelChange",(function(e){b.gc(t);const n=b.Tb().$implicit;return b.Tb(2).currentEditTiObj.attributes[n.key]=e})),b.Jb()}if(2&t){const t=b.Tb().$implicit,e=b.Tb(2);b.Yb("value",t.value),b.Xb("ngModel",e.currentEditTiObj.attributes[t.key])}}function nt(t,e){if(1&t&&(b.Kb(0,"option",83),b.kc(1),b.Jb()),2&t){const t=e.$implicit;b.Yb("value",t),b.xb(1),b.lc(t)}}function ot(t,e){if(1&t){const t=b.Lb();b.Kb(0,"select",85),b.Rb("ngModelChange",(function(e){b.gc(t);const n=b.Tb().$implicit;return b.Tb(2).currentEditTiObj.attributes[n.key]=e})),b.jc(1,nt,2,2,"option",82),b.Jb()}if(2&t){const t=b.Tb().$implicit,e=b.Tb(2);b.Zb("name","frequency-",t.key,""),b.Xb("ngModel",e.currentEditTiObj.attributes[t.key]),b.xb(1),b.Xb("ngForOf",e.currentEditAttributes[t.key][0].values)}}function it(t,e){if(1&t&&(b.Kb(0,"div",55),b.Kb(1,"label",94),b.Kb(2,"b"),b.kc(3),b.Jb(),b.Jb(),b.Kb(4,"div",95),b.jc(5,et,1,2,"input",96),b.jc(6,ot,2,3,"select",65),b.Jb(),b.Jb()),2&t){const t=e.$implicit,n=b.Tb(2);b.xb(3),b.lc(t.key),b.xb(2),b.Xb("ngIf",n.currentEditAttributes[t.key]&&"int"==n.currentEditAttributes[t.key][0].type),b.xb(1),b.Xb("ngIf",n.currentEditAttributes[t.key]&&"string"==n.currentEditAttributes[t.key][0].type.trim())}}function bt(t,e){if(1&t&&(b.Kb(0,"div",93),b.jc(1,it,7,3,"div",34),b.Ub(2,"keyvalue"),b.Jb()),2&t){const t=b.Tb();b.xb(1),b.Xb("ngForOf",b.Vb(2,1,t.currentEditTiObj.attributes))}}let ct=(()=>{class t{constructor(t,e,n,o){this.stockService=t,this.strategyService=e,this.router=n,this.loadingService=o,this.techIndicators=[],this.entryRows=[],this.entryConnectors=[],this.exitRows=[],this.exitConnectors=[],this.strategyName="",this.selectedSymbols=[],this.frequency="",this.quantity="",this.entryAction="",this.stopLossPrcnt=5,this.targetPrcnt=10}ngOnInit(){this.strategy?(this.isEditWindow=!0,this.deframe(this.strategy)):(this.addRow("entry"),this.addRow("exit")),this.stockService.getAllTechIndicators().subscribe(t=>{this.techIndicators=t.data,this.techIndicatorsByName=x.groupBy(this.techIndicators,"name"),console.log(t),console.log(this.techIndicatorsByName)})}removeSelectedSymbol(t){this.selectedSymbols.splice(t,1)}mapSymbolFromAutoComplete(t){this.selectedSymbols.includes(t.name)||this.selectedSymbols.push(t.name),this.stockAutoInput.clearValue()}addEntry(t){t.preventDefault(),this.addRow("entry"),this.addConditionalOp("entry")}addExit(t){t.preventDefault(),this.addRow("exit"),this.addConditionalOp("exit")}addConditionalOp(t){let e={conditional_operator:"And"};"entry"==t?this.entryConnectors.push(e):"exit"==t&&this.exitConnectors.push(e)}removeEntryCondn(t){this.entryRows&&this.entryRows.length>1&&this.entryRows.splice(t,1),this.entryConnectors.splice(t-1,1)}removeExitCondn(t){this.exitRows&&this.exitRows.length>1&&this.exitRows.splice(t,1),this.exitConnectors.splice(t-1,1)}addRow(t){let e={left:[{value_position:0,type:"TI",name:"rsi",attributes:{column:"close",period:14}}],compare:"greater than",right:[{type:"number",value:0}]};"entry"==t?this.entryRows.push(e):"exit"==t&&this.exitRows.push(e)}alterEntryObj(t,e,n){let o=t.left[e].type;switch("right"===n&&(o=t.right[e].type),o){case"TI":{let o=this.buildTechIndicatorTypeObj();"left"===n?t.left[e]=o:t.right[e]=o;break}case"number":{let o=this.buildNumberTypeObj();"left"===n?t.left[e]=o:t.right[e]=o;break}case"field":{let o=this.buildCandleTypeObj();"left"===n?t.left[e]=o:t.right[e]=o;break}}}alterExitObj(t,e,n){let o=t.left[e].type;switch("right"===n&&(o=t.right[e].type),o){case"TI":{let o=this.buildTechIndicatorTypeObj();"left"===n?t.left[e]=o:t.right[e]=o;break}case"number":{let o=this.buildNumberTypeObj();"left"===n?t.left[e]=o:t.right[e]=o;break}case"field":{let o=this.buildCandleTypeObj();"left"===n?t.left[e]=o:t.right[e]=o;break}}}buildNumberTypeObj(){return{type:"number",value:0}}buildTechIndicatorTypeObj(){return{value_position:0,type:"TI",name:"",attributes:{}}}buildCandleTypeObj(){return{type:"field",name:""}}markCurrentEditTiObj(t){this.currentEditTiObj=t,this.currentEditAttributes=x.groupBy(this.techIndicatorsByName[t.name][0].attributes,"name")}setAttributes(t){if(t&&t.name){t.attributes={};let e=this.techIndicatorsByName[t.name][0].attributes;e.length>0&&e.forEach(e=>{console.log(e.default),t.attributes[e.name]=e.default})}}saveStrategy(){let t=x.cloneDeep(this.entryRows),e=x.cloneDeep(this.exitRows);for(let o=0;o<this.entryConnectors.length;o++)t.splice(2*o+1,0,this.entryConnectors[o]);for(let o=0;o<this.exitConnectors.length;o++)e.splice(2*o+1,0,this.exitConnectors[o]);console.log(e),this.loadingService.show();let n=this.prepareFinalData(t,e);this.isEditWindow?this.strategyService.updateStrategy(n).subscribe(t=>{console.log(t),this.loadingService.hide()}):this.strategyService.createStrategy(n).subscribe(t=>{console.log(t),this.loadingService.hide()})}prepareFinalData(t,e){let n=(new Date).getTime()/1e3,o=new Date((new Date).setFullYear((new Date).getFullYear()-Number(this.duration))).getTime()/1e3,i={};return this.isEditWindow&&(i._id=this.strategy._id),i.name=this.strategyName,i.time_frame=this.frequency,i.symbol=this.selectedSymbols,i.entry_action=this.entryAction,i.qty=this.quantity,i.entry_condn=t,i.exit_condn=e,i.tgt_prcnt=this.targetPrcnt,i.sl_prcnt=this.stopLossPrcnt,i.start_datetime=o,i.end_datetime=n,i}deframe(t){this.strategyName=t.name,this.frequency=t.time_frame,this.selectedSymbols=t.symbol,this.entryAction=t.entry_action,this.quantity=t.qty,this.targetPrcnt=t.tgt_prcnt,this.stopLossPrcnt=t.sl_prcnt;let e=new Date(1e3*t.end_datetime),n=new Date(1e3*t.start_datetime);this.duration=e.getUTCFullYear()-n.getUTCFullYear();let o=t.entry_condn,i=t.exit_condn;if(o&&o.length>0)for(let b=0;b<o.length;b++)b%2==0?this.entryRows.push(o[b]):this.entryConnectors.push(o[b]);if(i&&i.length>0)for(let b=0;b<i.length;b++)b%2==0?this.exitRows.push(i[b]):this.exitConnectors.push(i[b])}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(C.a),b.Hb(g),b.Hb(o.b),b.Hb(M.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-create-strategy"]],viewQuery:function(t,e){var n;1&t&&b.oc(_,!0),2&t&&b.dc(n=b.Sb())&&(e.stockAutoInput=n.first)},inputs:{strategy:"strategy"},decls:92,vars:13,consts:[[1,"container"],["class","mt-5 mb-3",4,"ngIf"],["novalidate","",3,"ngSubmit"],["newStrategyForm","ngForm"],[1,"row"],["for","strategy-name",1,"form-label","fw-bold"],["type","text","id","strategy-name","name","strategy-name",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","my-4"],[1,"col-md-6","symbols"],[1,"form-label","fw-bold"],[3,"selectSymbol"],["stockAutoComplete",""],[1,"d-flex","justify-content-start","my-2","flex-wrap"],["type","button","class","btn btn-outline-primary me-2 mt-2",4,"ngFor","ngForOf"],[1,"col-md-3"],["for","strategy-frequency",1,"form-label","fw-bold"],["id","strategy-frequency","name","frequency",1,"form-select",3,"ngModel","ngModelChange"],["value","ONE_DAY"],["value","ONE_HOUR"],["for","strategy-duration",1,"form-label","fw-bold"],["id","strategy-duration","name","duration",1,"form-select",3,"ngModel","ngModelChange"],["value","1"],["value","3"],["value","5","disabled",""],["value","10","disabled",""],[1,"row","mb-4"],[1,"col"],["for","strategy-action",1,"form-label","fw-bold"],["id","strategy-action","name","action",1,"form-select",3,"ngModel","ngModelChange"],["value","buy"],["value","sell"],["for","strategy-quantity",1,"form-label","fw-bold"],["type","number","id","strategy-quantity","min","1","name","quantity",1,"form-control",3,"ngModel","ngModelChange"],[1,"entry-cond","mb-4"],["class","row mb-3",4,"ngFor","ngForOf"],["href","#",1,"my-2","fw-bold","text-dark","fs-6","mb-3",2,"zoom","1.2","text-decoration","none",3,"click"],["name","add-outline"],[1,"exit-cond","mb-4"],["for","strategy-sl",1,"form-label","fw-bold"],[1,"input-group","mb-3"],["type","number","name","strategy-sl",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-text"],["for","strategy-target",1,"form-label","fw-bold"],["type","number","name","strategy-target",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"],["id","editAttributeModal","data-bs-keyboard","false","tabindex","-1","aria-labelledby","editAttributeModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","w-25"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"mt-5","mb-3"],["type","button",1,"btn","btn-outline-primary","me-2","mt-2"],["name","close-outline",1,"align-bottom",2,"zoom","1.5",3,"click"],[1,"row","mb-3"],[1,"col-md-5"],[1,"d-flex"],["class","form-select me-2 condn-op",3,"ngModel","id","name","ngModelChange",4,"ngIf"],[1,"form-select","type-select",3,"name","ngModel","ngModelChange","change"],["value","TI"],["value","field"],["value","number"],["class","form-select",3,"name","ngModel","ngModelChange","change",4,"ngIf"],["type","number","class","form-control indicator-quantity",3,"ngModel","name","ngModelChange",4,"ngIf"],["class","form-select",3,"name","ngModel","ngModelChange",4,"ngIf"],["href","#","title","Edit","data-bs-toggle","modal","data-bs-target","#editAttributeModal","class","mx-1",3,"click",4,"ngIf"],[1,"col","mx-3"],["aria-label","comparartor",1,"form-select",3,"name","ngModel","ngModelChange"],["value","crosses over"],["value","crosses below"],["value","greater than"],["value","greater than equals to"],["value","equals to"],["value","less than"],["value","less than equals to"],[1,"entry-close"],["type","button","aria-label","Close",1,"btn-close","ms-4",3,"click"],[1,"form-select","me-2","condn-op",3,"ngModel","id","name","ngModelChange"],["value","And"],["value","Or"],[1,"form-select",3,"name","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","number",1,"form-control","indicator-quantity",3,"ngModel","name","ngModelChange"],[1,"form-select",3,"name","ngModel","ngModelChange"],["value","open"],["value","high"],["value","low"],["value","close"],["value","volume"],["href","#","title","Edit","data-bs-toggle","modal","data-bs-target","#editAttributeModal",1,"mx-1",3,"click"],["name","create-outline",2,"zoom","1.5"],[1,"modal-body"],[1,"col","col-form-label"],[1,"col-md-4"],["type","number","class","form-control",3,"value","ngModel","ngModelChange",4,"ngIf"],["type","number",1,"form-control",3,"value","ngModel","ngModelChange"]],template:function(t,e){1&t&&(b.Kb(0,"div",0),b.jc(1,w,2,0,"h2",1),b.Kb(2,"form",2,3),b.Rb("ngSubmit",(function(){return e.saveStrategy()})),b.Kb(4,"div",4),b.Kb(5,"div"),b.Kb(6,"label",5),b.kc(7,"Strategy Name"),b.Jb(),b.Kb(8,"input",6),b.Rb("ngModelChange",(function(t){return e.strategyName=t})),b.Jb(),b.Jb(),b.Jb(),b.Kb(9,"div",7),b.Kb(10,"div",8),b.Kb(11,"div"),b.Kb(12,"label",9),b.kc(13,"Instruments"),b.Jb(),b.Kb(14,"app-stock-auto-input",10,11),b.Rb("selectSymbol",(function(t){return e.mapSymbolFromAutoComplete(t)})),b.Jb(),b.Jb(),b.Kb(16,"div",12),b.jc(17,D,3,1,"button",13),b.Jb(),b.Jb(),b.Kb(18,"div",14),b.Kb(19,"label",15),b.kc(20,"Frequency"),b.Jb(),b.Kb(21,"select",16),b.Rb("ngModelChange",(function(t){return e.frequency=t})),b.Kb(22,"option",17),b.kc(23,"1 Day"),b.Jb(),b.Kb(24,"option",18),b.kc(25,"1 Hour"),b.Jb(),b.Jb(),b.Jb(),b.Kb(26,"div",14),b.Kb(27,"label",19),b.kc(28,"Duration"),b.Jb(),b.Kb(29,"select",20),b.Rb("ngModelChange",(function(t){return e.duration=t})),b.Kb(30,"option",21),b.kc(31,"1 Year"),b.Jb(),b.Kb(32,"option",22),b.kc(33,"3 Years"),b.Jb(),b.Kb(34,"option",23),b.kc(35,"5 Years"),b.Jb(),b.Kb(36,"option",24),b.kc(37,"10 Years"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(38,"div",25),b.Kb(39,"div",26),b.Kb(40,"label",27),b.kc(41,"Action"),b.Jb(),b.Kb(42,"select",28),b.Rb("ngModelChange",(function(t){return e.entryAction=t})),b.Kb(43,"option",29),b.kc(44,"Buy"),b.Jb(),b.Kb(45,"option",30),b.kc(46,"Sell"),b.Jb(),b.Jb(),b.Jb(),b.Kb(47,"div",26),b.Kb(48,"label",31),b.kc(49,"Quantity"),b.Jb(),b.Kb(50,"input",32),b.Rb("ngModelChange",(function(t){return e.quantity=t})),b.Jb(),b.Jb(),b.Jb(),b.Kb(51,"div",33),b.Kb(52,"label",9),b.kc(53,"Entry Condition"),b.Jb(),b.jc(54,q,46,15,"div",34),b.Kb(55,"a",35),b.Rb("click",(function(t){return e.addEntry(t)})),b.Ib(56,"ion-icon",36),b.Kb(57,"span"),b.kc(58,"Add More"),b.Jb(),b.Jb(),b.Jb(),b.Kb(59,"div",37),b.Kb(60,"label",9),b.kc(61,"Exit Condition"),b.Jb(),b.jc(62,tt,46,15,"div",34),b.Kb(63,"a",35),b.Rb("click",(function(t){return e.addExit(t)})),b.Ib(64,"ion-icon",36),b.Kb(65,"span"),b.kc(66,"Add More"),b.Jb(),b.Jb(),b.Jb(),b.Kb(67,"div",25),b.Kb(68,"div",26),b.Kb(69,"label",38),b.kc(70,"Stop Loss"),b.Jb(),b.Kb(71,"div",39),b.Kb(72,"input",40),b.Rb("ngModelChange",(function(t){return e.stopLossPrcnt=t})),b.Jb(),b.Kb(73,"span",41),b.kc(74,"%"),b.Jb(),b.Jb(),b.Jb(),b.Kb(75,"div",26),b.Kb(76,"label",42),b.kc(77,"Target"),b.Jb(),b.Kb(78,"div",39),b.Kb(79,"input",43),b.Rb("ngModelChange",(function(t){return e.targetPrcnt=t})),b.Jb(),b.Kb(80,"span",41),b.kc(81,"%"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(82,"button",44),b.kc(83,"Save and Run Backtest"),b.Jb(),b.Jb(),b.Jb(),b.Kb(84,"div",45),b.Kb(85,"div",46),b.Kb(86,"div",47),b.Kb(87,"div",48),b.Kb(88,"h5",49),b.kc(89),b.Jb(),b.Ib(90,"button",50),b.Jb(),b.jc(91,bt,3,3,"div",51),b.Jb(),b.Jb(),b.Jb()),2&t&&(b.xb(1),b.Xb("ngIf",!e.isEditWindow),b.xb(7),b.Xb("ngModel",e.strategyName),b.xb(9),b.Xb("ngForOf",e.selectedSymbols),b.xb(4),b.Xb("ngModel",e.frequency),b.xb(8),b.Xb("ngModel",e.duration),b.xb(13),b.Xb("ngModel",e.entryAction),b.xb(8),b.Xb("ngModel",e.quantity),b.xb(4),b.Xb("ngForOf",e.entryRows),b.xb(8),b.Xb("ngForOf",e.exitRows),b.xb(10),b.Xb("ngModel",e.stopLossPrcnt),b.xb(7),b.Xb("ngModel",e.targetPrcnt),b.xb(10),b.mc(" ",null==e.currentEditTiObj?null:e.currentEditTiObj.name,""),b.xb(2),b.Xb("ngIf",e.currentEditTiObj))},directives:[p.n,O.o,O.e,O.f,O.b,O.d,O.g,T.a,p.m,O.m,O.h,O.n,O.i],pipes:[p.h],styles:[".form-select.type-select[_ngcontent-%COMP%]{max-width:40%;background-color:var(--brand-color-secondary);color:#fff}.form-select.type-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff;color:#000}select.condn-op[_ngcontent-%COMP%]{width:100px}"]}),t})();const rt=["editStrategy"];function at(t,e){if(1&t){const t=b.Lb();b.Kb(0,"div",17),b.Kb(1,"div",18),b.Kb(2,"h5",19),b.kc(3),b.Jb(),b.Kb(4,"h6",20),b.kc(5,"Card subtitle"),b.Jb(),b.Kb(6,"p",21),b.kc(7,"Some quick example text to build on the card title and make up the bulk of the card's content."),b.Jb(),b.Kb(8,"a",22),b.Rb("click",(function(n){b.gc(t);const o=e.$implicit;return b.Tb().markCurrentStrategy(n,o)})),b.kc(9," Edit "),b.Ib(10,"ion-icon",23),b.Jb(),b.Kb(11,"a",24),b.Rb("click",(function(n){b.gc(t);const o=e.$implicit;return b.Tb().removeStrategy(n,o)})),b.kc(12,"Delete"),b.Jb(),b.Kb(13,"a",25),b.kc(14,"Show Backtest Result"),b.Jb(),b.Jb(),b.Jb()}if(2&t){const t=e.$implicit;b.xb(3),b.lc(t.name)}}function lt(t,e){if(1&t&&(b.Kb(0,"div",26),b.Ib(1,"app-create-strategy",27,28),b.Jb()),2&t){const t=b.Tb();b.xb(1),b.Xb("strategy",t.currentStrategy)}}const st=[{path:"",component:(()=>{class t{constructor(t,e){this.strategyService=t,this.loadingService=e}ngOnInit(){this.getAllStrategies()}getAllStrategies(){this.loadingService.show(),this.strategyService.getAllStrategies().subscribe(t=>{this.strategies=t,this.loadingService.hide()})}toggleOverview(t){this.isOverviewOpen=!this.isOverviewOpen,document.getElementById("lastWeekTab").classList.remove("tab-active"),document.getElementById("overviewTab").classList.add("tab-active"),this.isLastWeekOpen=!1}toggleLastWeek(){this.isLastWeekOpen=!this.isLastWeekOpen,document.getElementById("overviewTab").classList.remove("tab-active"),document.getElementById("lastWeekTab").classList.add("tab-active"),this.isOverviewOpen=!1}updateStrategy(t){t.preventDefault(),this.editStrategy.saveStrategy(),this.getAllStrategies()}removeStrategy(t,e){t.preventDefault(),this.loadingService.show(),this.strategyService.removeStrategy(e._id).subscribe(t=>{console.log(t),this.loadingService.hide(),this.getAllStrategies()})}markCurrentStrategy(t,e){t.preventDefault(),this.currentStrategy=e}cancelSelection(){this.currentStrategy=null}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(g),b.Hb(M.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-strategy"]],viewQuery:function(t,e){var n;1&t&&b.oc(rt,!0),2&t&&b.dc(n=b.Sb())&&(e.editStrategy=n.first)},decls:23,vars:2,consts:[[1,"container"],[1,"d-flex","justify-content-between","my-4"],[1,"container-title"],["type","button","routerLink","/strategy/create",1,"btn","btn-primary","mx-4","fw-bold","btn-add"],[1,"d-flex","flex-wrap","justify-content-evenly","m-4"],["class","card m-4 p-2","style","width: 40%;",4,"ngFor","ngForOf"],["id","editModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","editModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-fullscreen","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"container","d-flex","justify-content-between"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"card","m-4","p-2",2,"width","40%"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["href","#","title","Edit","data-bs-toggle","modal","data-bs-target","#editModal",1,"mx-1",3,"click"],["name","create-outline"],["href","#",1,"card-link",3,"click"],["href","#",1,"card-link"],[1,"modal-body"],[3,"strategy"],["editStrategy",""]],template:function(t,e){1&t&&(b.Kb(0,"div",0),b.Ib(1,"app-navbar"),b.Kb(2,"div",1),b.Kb(3,"h3",2),b.kc(4,"My Strategies"),b.Jb(),b.Kb(5,"button",3),b.kc(6,"Add Strategy"),b.Jb(),b.Jb(),b.Kb(7,"div",4),b.jc(8,at,15,1,"div",5),b.Jb(),b.Jb(),b.Kb(9,"div",6),b.Kb(10,"div",7),b.Kb(11,"div",8),b.Kb(12,"div",9),b.Kb(13,"div",10),b.Kb(14,"h2",11),b.kc(15," Edit Strategy"),b.Jb(),b.Kb(16,"button",12),b.Rb("click",(function(){return e.cancelSelection()})),b.Jb(),b.Jb(),b.Jb(),b.jc(17,lt,3,1,"div",13),b.Kb(18,"div",14),b.Kb(19,"button",15),b.Rb("click",(function(){return e.cancelSelection()})),b.kc(20,"Cancel"),b.Jb(),b.Kb(21,"button",16),b.Rb("click",(function(t){return e.updateStrategy(t)})),b.kc(22," Update Strategy"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&t&&(b.xb(8),b.Xb("ngForOf",e.strategies),b.xb(9),b.Xb("ngIf",e.currentStrategy))},directives:[m.a,o.c,p.m,p.n,ct],styles:["#quick-view[_ngcontent-%COMP%]{min-height:100vh;background-color:var(--brand-color-primary)}.modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{border:none}.container-title[_ngcontent-%COMP%], .modal-title[_ngcontent-%COMP%]{color:var(--brand-color-primary);font-weight:600}ion-icon[_ngcontent-%COMP%]{color:var(--brand-color-secondary)}.card[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 0 8px 2px var(--tertiary-gray);min-width:500px}.card-title[_ngcontent-%COMP%], .current-figure[_ngcontent-%COMP%]{display:inline-block;color:var(--primary-gray)}.modal-body[_ngcontent-%COMP%]{color:var(--brand-color-primary)}.entry-container[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.symbols[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{width:.2em}.btn-close[_ngcontent-%COMP%]:focus{box-shadow:none}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%], select[_ngcontent-%COMP%]:focus{box-shadow:0 0 2px var(--brand-color-secondary);color:var(--brand-color-primary);font-weight:600;border:none;background-color:initial}.btn.btn-outline-primary[_ngcontent-%COMP%], .btn.btn-outline-primary[_ngcontent-%COMP%]:hover{color:var(--brand-color-secondary);border:1px solid var(--brand-color-secondary);box-shadow:0 0 2px var(--brand-color-secondary);background-color:#fff}.entry-close[_ngcontent-%COMP%], .exit-close[_ngcontent-%COMP%]{margin-left:.3rem;margin-right:-.1rem}.entry-container[_ngcontent-%COMP%]   .last[_ngcontent-%COMP%]{margin-left:1rem}.current-percent[_ngcontent-%COMP%]{font-size:.8rem;text-align:right}#quick-view[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{display:block;color:#fff;margin-bottom:.2rem}#quick-view[_ngcontent-%COMP%]   .current-figure[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem}#quick-view[_ngcontent-%COMP%]   .current-figure.profit[_ngcontent-%COMP%], .profit[_ngcontent-%COMP%]{color:#0c0}#quick-view[_ngcontent-%COMP%]   .current-figure.loss[_ngcontent-%COMP%], .loss[_ngcontent-%COMP%]{color:red}#D[_ngcontent-%COMP%]{color:#fff;font-size:.7rem}.chart-value[_ngcontent-%COMP%]{margin-right:.8rem;margin-left:.2rem;font-size:.7rem}a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.performance-tab[_ngcontent-%COMP%]{cursor:pointer;color:#fff}.performance-tab[_ngcontent-%COMP%]:hover, .tab-active[_ngcontent-%COMP%]{color:#daa520;border-bottom:1px solid #daa520}.overview-heading[_ngcontent-%COMP%]{color:#daa520;font-size:.8rem}.overview-text[_ngcontent-%COMP%]{color:#fff;font-size:.7rem}#quick-view[_ngcontent-%COMP%]   .current-figure[_ngcontent-%COMP%]{font-size:.9rem}.fundamentals-container[_ngcontent-%COMP%]   .overview-text[_ngcontent-%COMP%]{width:56.547px;margin-right:1rem}.fundamentals-container[_ngcontent-%COMP%]   .current-figure[_ngcontent-%COMP%], .fundamentals-container[_ngcontent-%COMP%]   .overview-text[_ngcontent-%COMP%]{display:inline-block}.last-week-container[_ngcontent-%COMP%]   .overview-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500}.btn[_ngcontent-%COMP%]{padding:.2rem .4rem;border-radius:5px}#quick-view[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .btn-add[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{width:8.5rem}.btn.btn-primary[_ngcontent-%COMP%]{background-color:var(--brand-color-secondary);border:var(--brand-color-secondary);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .15rem var(--brand-color-tertiary)}.btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;zoom:1.4}.btn-title[_ngcontent-%COMP%]{font-size:.9rem}"]}),t})()},{path:"create",component:ct},{path:"backtest",component:v}];let dt=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[o.e.forChild(st)],o.e]}),t})();var ut=n("PCNd");let gt=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[ut.a,dt]]}),t})()}}]);
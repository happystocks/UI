(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{qdFu:function(t,e,n){"use strict";n.r(e),n.d(e,"PortfolioModule",(function(){return M}));var i=n("tyNb"),o=n("njyG"),b=n("XNiG"),r=n("fXoL"),a=n("tk/3"),c=n("z6cu"),l=n("lJxs"),s=n("vkgz"),d=n("JIr8"),g=n("AytR");class p{}class h{}class u{}new a.d({"Content-Type":"application/json"});let v=(()=>{class t{constructor(t){this.http=t,this.portfolioUrl=g.a.pvtApiUrl+"/trade"}getHoldings(){return this.http.get(this.portfolioUrl+"/portfolio").pipe(Object(l.a)(t=>class{static mapPortfolioAttributes(t){let e=new h;return t&&(e.id=t._id,e.userId=t.user_Id,e.invested_capital=t.invested_capital,e.reserve_capital=t.reserve_capital,e.holdings=t.holdings),e}static mapPortfolioList(t){let e=[];return t&&t.length>0&&t.forEach(t=>{e.push(this.mapPortfolioAttributes(t))}),e}}.mapPortfolioList(t)),Object(s.a)(t=>console.log(t)),Object(d.a)(t=>Object(c.a)(t)))}getProfitLoss(){return this.http.get(this.portfolioUrl+"/pnl").pipe(Object(l.a)(t=>class{static mapPnlAttributes(t){let e=new p;return t&&(e.entry_action=t.entry_action,e.entry_avg_price=t.entry_avg_price,e.exit_action=t.exit_action,e.exit_avg_price=t.exit_avg_price,e.exit_time=t.exit_time,e.id=t._id,e.name=t.name,e.profit=t.profit,e.qty=t.qty,e.symbol=t.symbol,e.userId=t.user_id),e}static mapPnlList(t){let e=[];return t&&t.length>0&&t.forEach(t=>{e.push(this.mapPnlAttributes(t))}),e}}.mapPnlList(t)),Object(s.a)(t=>console.log(t)),Object(d.a)(t=>Object(c.a)(t)))}getTradeBook(){return this.http.get(this.portfolioUrl+"/tradebook").pipe(Object(l.a)(t=>class{static mapTradeAttributes(t){let e=new u;return t&&(e.action=t.action,e.avg_price=t.avg_price,e.id=t._id,e.name=t.name,e.qty=t.qty,e.symbol=t.symbol,e.trade_time=t.trade_time,e.userId=t.user_id),e}static mapTradebookList(t){let e=[];return t&&t.length>0&&t.forEach(t=>{e.push(this.mapTradeAttributes(t))}),e}}.mapTradebookList(t)),Object(s.a)(t=>console.log(t)),Object(d.a)(t=>Object(c.a)(t)))}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(a.b))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=n("7ch9"),k=n("Jqv5"),O=n("ofXK");function _(t,e){if(1&t){const t=r.Lb();r.Kb(0,"tr"),r.Kb(1,"td",3),r.Kb(2,"div"),r.kc(3),r.Jb(),r.Kb(4,"div"),r.kc(5),r.Jb(),r.Jb(),r.Kb(6,"td",3),r.kc(7),r.Jb(),r.Kb(8,"td",3),r.kc(9),r.Jb(),r.Kb(10,"td",3),r.kc(11),r.Jb(),r.Kb(12,"td"),r.Kb(13,"a",16),r.Rb("click",(function(n){r.gc(t);const i=e.$implicit;return r.Tb().exitTrade(n,i)})),r.kc(14,"Exit"),r.Jb(),r.Jb(),r.Jb()}if(2&t){const t=e.$implicit;r.xb(3),r.lc(t.symbol),r.xb(2),r.lc(t.name),r.xb(2),r.lc(t.action),r.xb(2),r.lc(t.avg_price),r.xb(2),r.lc(t.qty)}}function J(t,e){if(1&t&&(r.Kb(0,"tr"),r.Kb(1,"td",3),r.kc(2),r.Ub(3,"date"),r.Jb(),r.Kb(4,"td",3),r.Kb(5,"div"),r.kc(6),r.Jb(),r.Kb(7,"div"),r.kc(8),r.Jb(),r.Jb(),r.Kb(9,"td",3),r.kc(10),r.Jb(),r.Kb(11,"td",3),r.kc(12),r.Jb(),r.Kb(13,"td",3),r.kc(14),r.Jb(),r.Kb(15,"td",3),r.kc(16),r.Jb(),r.Jb()),2&t){const t=e.$implicit;r.xb(2),r.lc(r.Wb(3,7,t.trade_time,"short")),r.xb(4),r.lc(t.symbol),r.xb(2),r.lc(t.name),r.xb(2),r.lc(t.action),r.xb(2),r.lc(t.avg_price),r.xb(2),r.lc(t.qty),r.xb(2),r.mc(" ",t.avg_price*t.qty,"")}}const m=function(t,e){return{profit:t,loss:e}};function K(t,e){if(1&t&&(r.Kb(0,"tr"),r.Kb(1,"td",3),r.kc(2),r.Ub(3,"date"),r.Jb(),r.Kb(4,"td",3),r.Kb(5,"div"),r.kc(6),r.Jb(),r.Kb(7,"div"),r.kc(8),r.Jb(),r.Jb(),r.Kb(9,"td",3),r.kc(10),r.Jb(),r.Kb(11,"td",3),r.kc(12),r.Jb(),r.Kb(13,"td",3),r.kc(14),r.Jb(),r.Kb(15,"td",3),r.kc(16),r.Jb(),r.Kb(17,"td",3),r.kc(18),r.Jb(),r.Kb(19,"td",17),r.kc(20),r.Jb(),r.Jb()),2&t){const t=e.$implicit,n=e.index,i=r.Tb();r.xb(2),r.lc(r.Wb(3,10,t.exit_time,"short")),r.xb(4),r.lc(t.symbol),r.xb(2),r.lc(t.name),r.xb(2),r.lc(t.entry_action),r.xb(2),r.lc(t.entry_avg_price),r.xb(2),r.lc(t.exit_action),r.xb(2),r.lc(t.exit_avg_price),r.xb(2),r.lc(t.qty),r.xb(1),r.Xb("ngClass",r.bc(13,m,i.pnlTableData[n].profit>0,i.pnlTableData[n].profit<0)),r.xb(1),r.mc(" ",t.profit>0?t.profit:-t.profit," ")}}const x=function(t){return{active:t}},P=function(t){return{hide:t}},T=[{path:"",component:(()=>{class t{constructor(t,e){this.portfolioService=t,this.loadingService=e,this.holdingsTable=[],this.pnlTableData=[],this.tradebookTableData=[],this.dtOptions=[],this.dtTrigger1=new b.a,this.dtTrigger2=new b.a,this.dtTrigger3=new b.a,this.isHoldingsOpen=!0}ngOnInit(){this.getHoldingsData(),this.getPnlData(),this.getTradebookData(),this.dtOptions[0]={dom:"liBrtp",pagingType:"simple_numbers",columnDefs:[{targets:[4],orderable:!1}]},this.dtOptions[1]={dom:"liBrtp",pagingType:"simple_numbers"},this.dtOptions[2]={dom:"liBrtp",pagingType:"simple_numbers"}}getHoldingsData(){this.loadingService.show(),this.portfolioService.getHoldings().subscribe(t=>{this.loadingService.hide(),this.portfolioData=t,t.forEach(t=>{this.reserveCapital=t.reserve_capital,this.investedCapital=t.invested_capital,this.holdingsTable=t.holdings,this.holdingsLength=this.holdingsTable.length}),this.dtTrigger1.next()})}getTradebookData(){this.loadingService.show(),this.portfolioService.getTradeBook().subscribe(t=>{this.loadingService.hide(),this.tradebookTableData=t,console.log(this.tradebookTableData),this.dtTrigger2.next()})}getPnlData(){this.loadingService.show(),this.portfolioService.getProfitLoss().subscribe(t=>{this.loadingService.hide(),this.pnlTableData=t,t.forEach((t,e)=>{let n=new Date(t.exit_time);this.pnlTableData[e].exit_time=n}),this.dtTrigger3.next()})}toggleHoldings(){this.isHoldingsOpen=!this.isHoldingsOpen,this.isPnlOpen=!1,this.isTradebookOpen=!1}toggleTradebook(){this.isTradebookOpen=!this.isTradebookOpen,this.isHoldingsOpen=!1,this.isPnlOpen=!1}togglePnl(){this.isPnlOpen=!this.isPnlOpen,this.isHoldingsOpen=!1,this.isTradebookOpen=!1}ngOnDestroy(){this.dtTrigger1.unsubscribe(),this.dtTrigger2.unsubscribe(),this.dtTrigger3.unsubscribe()}exitTrade(t,e){t.preventDefault(),console.log(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(v),r.Hb(f.a))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-portfolio"]],viewQuery:function(t,e){var n;1&t&&r.oc(o.a,!0),2&t&&r.dc(n=r.Sb())&&(e.datatableElement=n.first)},decls:75,vars:30,consts:[[1,"container"],[1,"fw-bold","mt-5"],[1,"d-flex","flex-column","my-2","capitals"],[1,"fw-bold"],[1,"my-3"],[1,"nav","nav-pills","nav-fill"],[1,"nav-item"],["aria-current","page",1,"fw-bold","nav-link","active",3,"ngClass","click"],[1,"fw-bold","nav-link",3,"ngClass","click"],["id","holdingsTable",3,"ngClass"],["datatable","",1,"table","datatable","my-3","table-striped","table-bordered","cell-border","border-top",3,"dtOptions","dtTrigger"],[1,"bg-brand","text-white"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","tradebooktable",3,"ngClass"],["id","pnltable",3,"ngClass"],["href","#",1,"fw-bold",3,"click"],[1,"fw-bold",3,"ngClass"]],template:function(t,e){1&t&&(r.Kb(0,"div",0),r.Ib(1,"app-navbar"),r.Kb(2,"h3",1),r.kc(3,"Portfolio"),r.Jb(),r.Kb(4,"div",2),r.Kb(5,"div",3),r.kc(6),r.Jb(),r.Kb(7,"div",3),r.kc(8),r.Jb(),r.Jb(),r.Kb(9,"div",4),r.Kb(10,"ul",5),r.Kb(11,"li",6),r.Kb(12,"a",7),r.Rb("click",(function(){return e.toggleHoldings()})),r.kc(13),r.Jb(),r.Jb(),r.Kb(14,"li",6),r.Kb(15,"a",8),r.Rb("click",(function(){return e.toggleTradebook()})),r.kc(16,"Trade Book"),r.Jb(),r.Jb(),r.Kb(17,"li",6),r.Kb(18,"a",8),r.Rb("click",(function(){return e.togglePnl()})),r.kc(19,"Profit & Loss"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(20,"div",9),r.Kb(21,"table",10),r.Kb(22,"thead"),r.Kb(23,"tr",11),r.Kb(24,"th",12),r.kc(25,"Instrument"),r.Jb(),r.Kb(26,"th",12),r.kc(27,"Action"),r.Jb(),r.Kb(28,"th",12),r.kc(29,"Average Price"),r.Jb(),r.Kb(30,"th",12),r.kc(31,"Quantity"),r.Jb(),r.Ib(32,"th"),r.Jb(),r.Jb(),r.Kb(33,"tbody"),r.jc(34,_,15,5,"tr",13),r.Jb(),r.Jb(),r.Jb(),r.Kb(35,"div",14),r.Kb(36,"table",10),r.Kb(37,"thead"),r.Kb(38,"tr",11),r.Kb(39,"th",12),r.kc(40,"Date"),r.Jb(),r.Kb(41,"th",12),r.kc(42,"Instrument"),r.Jb(),r.Kb(43,"th",12),r.kc(44,"Action"),r.Jb(),r.Kb(45,"th",12),r.kc(46,"Average Price"),r.Jb(),r.Kb(47,"th",12),r.kc(48,"Quantity"),r.Jb(),r.Kb(49,"th",12),r.kc(50,"Total Price"),r.Jb(),r.Jb(),r.Jb(),r.Kb(51,"tbody"),r.jc(52,J,17,10,"tr",13),r.Jb(),r.Jb(),r.Jb(),r.Kb(53,"div",15),r.Kb(54,"table",10),r.Kb(55,"thead"),r.Kb(56,"tr",11),r.Kb(57,"th",12),r.kc(58,"Date"),r.Jb(),r.Kb(59,"th",12),r.kc(60,"Instrument"),r.Jb(),r.Kb(61,"th",12),r.kc(62,"Entry Action"),r.Jb(),r.Kb(63,"th",12),r.kc(64,"Entry Avg Price"),r.Jb(),r.Kb(65,"th",12),r.kc(66,"Exit Action"),r.Jb(),r.Kb(67,"th",12),r.kc(68,"Exit Avg Price"),r.Jb(),r.Kb(69,"th",12),r.kc(70,"Quantity"),r.Jb(),r.Kb(71,"th",12),r.kc(72,"Profit or Loss"),r.Jb(),r.Jb(),r.Jb(),r.Kb(73,"tbody"),r.jc(74,K,21,16,"tr",13),r.Jb(),r.Jb(),r.Jb(),r.Jb()),2&t&&(r.xb(6),r.mc("Reserve Capital : \u20b9 ",e.reserveCapital,""),r.xb(2),r.mc("Invested Capital : \u20b9 ",e.investedCapital,""),r.xb(4),r.Xb("ngClass",r.ac(18,x,e.isHoldingsOpen)),r.xb(1),r.mc(" Holdings (",e.holdingsLength,")"),r.xb(2),r.Xb("ngClass",r.ac(20,x,e.isTradebookOpen)),r.xb(3),r.Xb("ngClass",r.ac(22,x,e.isPnlOpen)),r.xb(2),r.Xb("ngClass",r.ac(24,P,!e.isHoldingsOpen)),r.xb(1),r.Xb("dtOptions",e.dtOptions[0])("dtTrigger",e.dtTrigger1),r.xb(13),r.Xb("ngForOf",e.holdingsTable),r.xb(1),r.Xb("ngClass",r.ac(26,P,!e.isTradebookOpen)),r.xb(1),r.Xb("dtOptions",e.dtOptions[1])("dtTrigger",e.dtTrigger2),r.xb(16),r.Xb("ngForOf",e.tradebookTableData),r.xb(1),r.Xb("ngClass",r.ac(28,P,!e.isPnlOpen)),r.xb(1),r.Xb("dtOptions",e.dtOptions[2])("dtTrigger",e.dtTrigger3),r.xb(20),r.Xb("ngForOf",e.pnlTableData))},directives:[k.a,O.l,o.a,O.m],pipes:[O.e],styles:["h3[_ngcontent-%COMP%]{color:var(--brand-color-primary)}.capitals[_ngcontent-%COMP%]{align-items:flex-end}.capitals[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:var(--brand-color-secondary)}.nav-link[_ngcontent-%COMP%]{color:var(--brand-color-primary)}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background-color:var(--brand-color-secondary)}table.dataTable.cell-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.dataTable.cell-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.dataTable.cell-border[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid var(--brand-color-secondary);border-right:1px solid var(--brand-color-secondary)}table.dataTable.cell-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, table.dataTable.cell-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, table.dataTable.cell-border[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:1px solid var(--brand-color-secondary)}th[_ngcontent-%COMP%]{vertical-align:middle}.bg-brand[_ngcontent-%COMP%]{background-color:var(--brand-color-primary)}a[_ngcontent-%COMP%]{text-decoration:none;color:#000;cursor:pointer}ion-icon[_ngcontent-%COMP%]{zoom:1.2}.profit[_ngcontent-%COMP%]{color:green}.loss[_ngcontent-%COMP%]{color:red}.hide[_ngcontent-%COMP%]{display:none}"]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(T)],i.e]}),t})();var C=n("PCNd");let M=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},imports:[[C.a,y]]}),t})()}}]);